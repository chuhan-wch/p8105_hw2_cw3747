p8105-hw2-cw3747
================
chuhan wang_cw3747
2025-09-24

## Problem 1.1

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
pols = read_csv("./538_datasets/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols = pols |>
  separate(mon, c("year", "month", "day"), sep = "-") |>
  mutate(month = month.abb[as.numeric(month)]) |>
  mutate(president = case_when(
    prez_dem == 1 ~ "dem",
    prez_gop == 1 ~ "gop"
  )) |>
  select(-prez_gop, -prez_dem, -day)
```

## Problem 1.2

``` r
snp = read_csv("./538_datasets/snp.csv") |>
  separate(date, c("month", "date", "year"), sep = "/") |>
  mutate(
    month = factor(month.abb[as.integer(month)], levels = month.abb, ordered = TRUE),
    year = as.numeric(year),
    year = ifelse(year < 100, ifelse(year >= 50, 1900 + year, 2000 + year), year)
    ) |>
  select(year, month, close) |>
  arrange(year, month)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Problem 1.3

``` r
unemp = read_csv("./538_datasets/unemployment.csv") |>
  rename(year = Year) |>
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment"
  ) |>
  mutate(
    month = factor(month, levels = month.abb, ordered = TRUE),
    year = as.numeric(year)
    ) |>
  arrange(year, month)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Problem 1.4

``` r
pols = pols |>
  mutate(
    year = as.integer(year),
    month = as.character(month))

snp = snp |>
  mutate(
    year = as.integer(year),
    month = as.character(month))

unemp = unemp |>
  mutate(
    year = as.integer(year),
    month = as.character(month))
```

``` r
pols_merged = pols |>
  left_join(snp, by = c("year", "month")) |>
  left_join(unemp, by = c("year", "month"))
```

## Description

The pols-moth dataset presents the political composition of the U.S.
government, including counts of Democratic and Republican governors,
senators, and representatives, along with the president’s party from
January 1947 to June 2015.The snp dataset provides monthly closing
values of the Standard & Poor’s stock index, reflecting stock market
performance over time from January 1950 to June 2015. And the
unemployment dataset shows monthly unemployment rates from 1948 through
2015. The resulting dataset spans roughly 1950 to mid-2015. It combines
political composition, stock market performance, and unemployment trends
into one frame, with key variables including year, month, president,
governors, senators, representatives, close (S&P index), and
unemployment rate. This integrated dataset allows examination of
relationships between political context, economic indicators, and labor
market conditions.
